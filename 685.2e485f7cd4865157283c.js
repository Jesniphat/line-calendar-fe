(self.webpackChunkline_calendar=self.webpackChunkline_calendar||[]).push([[685],{3685:(e,t,n)=>{"use strict";n.r(t),n.d(t,{LoginModule:()=>F});var r=n(2057),o=n(3713),i=n(6304),a=n(9734),s=n(1558);let c=(()=>{class e{constructor(e){this.loginStore=e}canActivate(e,t){var n=this;return(0,i.Z)(function*(){return n.loginStore.setIsLogin(!1),localStorage.removeItem("_u"),!0})()}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(s.B))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),l=(()=>{class e{constructor(e,t,n){this.activatedRoute=e,this.loginStore=t,this.router=n}ngOnInit(){this.activatedRoute.queryParams.subscribe(e=>{const t=JSON.stringify({_:e.access_token,__:e.refresh_token});localStorage.setItem("_u",t),this.loginStore.setIsLogin(!0),this.router.navigate([""])})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(o.gz),a.Y36(s.B),a.Y36(o.F0))},e.\u0275cmp=a.Xpm({type:e,selectors:[["apis-login-google-success"]],decls:0,vars:0,template:function(e,t){},styles:[""]}),e})();var u=n(270),p=n(3013),d=n(2429),g=n(7965);function m(e,t){1&e&&a.GkF(0)}function f(e,t){if(1&e&&(a.TgZ(0,"div",8),a.Hsn(1,1),a.YNc(2,m,1,0,"ng-container",6),a.qZA()),2&e){const e=a.oxw();a.xp6(2),a.Q6J("ngTemplateOutlet",e.headerTemplate)}}function h(e,t){1&e&&a.GkF(0)}function v(e,t){if(1&e&&(a.TgZ(0,"div",9),a._uU(1),a.YNc(2,h,1,0,"ng-container",6),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.hij(" ",e.header," "),a.xp6(1),a.Q6J("ngTemplateOutlet",e.titleTemplate)}}function T(e,t){1&e&&a.GkF(0)}function Z(e,t){if(1&e&&(a.TgZ(0,"div",10),a._uU(1),a.YNc(2,T,1,0,"ng-container",6),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.hij(" ",e.subheader," "),a.xp6(1),a.Q6J("ngTemplateOutlet",e.subtitleTemplate)}}function b(e,t){1&e&&a.GkF(0)}function w(e,t){1&e&&a.GkF(0)}function y(e,t){if(1&e&&(a.TgZ(0,"div",11),a.Hsn(1,2),a.YNc(2,w,1,0,"ng-container",6),a.qZA()),2&e){const e=a.oxw();a.xp6(2),a.Q6J("ngTemplateOutlet",e.footerTemplate)}}const x=["*",[["p-header"]],[["p-footer"]]],q=["*","p-header","p-footer"];let k=(()=>{class e{constructor(e){this.el=e}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"title":this.titleTemplate=e.template;break;case"subtitle":this.subtitleTemplate=e.template;break;case"content":this.contentTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;default:this.contentTemplate=e.template}})}getBlockableElement(){return this.el.nativeElement.children[0]}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(a.SBq))},e.\u0275cmp=a.Xpm({type:e,selectors:[["p-card"]],contentQueries:function(e,t,n){if(1&e&&(a.Suo(n,p.h4,5),a.Suo(n,p.$_,5),a.Suo(n,p.jx,4)),2&e){let e;a.iGM(e=a.CRH())&&(t.headerFacet=e.first),a.iGM(e=a.CRH())&&(t.footerFacet=e.first),a.iGM(e=a.CRH())&&(t.templates=e)}},inputs:{header:"header",subheader:"subheader",style:"style",styleClass:"styleClass"},ngContentSelectors:q,decls:9,vars:9,consts:[[3,"ngClass","ngStyle"],["class","p-card-header",4,"ngIf"],[1,"p-card-body"],["class","p-card-title",4,"ngIf"],["class","p-card-subtitle",4,"ngIf"],[1,"p-card-content"],[4,"ngTemplateOutlet"],["class","p-card-footer",4,"ngIf"],[1,"p-card-header"],[1,"p-card-title"],[1,"p-card-subtitle"],[1,"p-card-footer"]],template:function(e,t){1&e&&(a.F$t(x),a.TgZ(0,"div",0),a.YNc(1,f,3,1,"div",1),a.TgZ(2,"div",2),a.YNc(3,v,3,2,"div",3),a.YNc(4,Z,3,2,"div",4),a.TgZ(5,"div",5),a.Hsn(6),a.YNc(7,b,1,0,"ng-container",6),a.qZA(),a.YNc(8,y,3,1,"div",7),a.qZA(),a.qZA()),2&e&&(a.Tol(t.styleClass),a.Q6J("ngClass","p-card p-component")("ngStyle",t.style),a.xp6(1),a.Q6J("ngIf",t.headerFacet||t.headerTemplate),a.xp6(2),a.Q6J("ngIf",t.header||t.titleTemplate),a.xp6(1),a.Q6J("ngIf",t.subheader||t.subtitleTemplate),a.xp6(3),a.Q6J("ngTemplateOutlet",t.contentTemplate),a.xp6(1),a.Q6J("ngIf",t.footerFacet||t.footerTemplate))},directives:[r.mk,r.PC,r.O5,r.tP],styles:[".p-card-header img{width:100%}"],encapsulation:2,changeDetection:0}),e})(),_=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[r.ez],p.m8]}),e})();var A=n(3928),J=n(4207);const S=[{path:"",component:(()=>{class e{constructor(e,t,n,r){this.fb=e,this.authService=t,this.router=n,this.messageService=r,this.loginForm=this.fb.group({email:[""],username:["",[u.kI.required]],password:["",[u.kI.required]]})}ngOnInit(){}login(){this.authService.login(this.loginForm.value).subscribe(e=>{if("OK"!==(null==e?void 0:e.success))throw this.messageService.add({severity:"error",summary:"Error",detail:"Login Error"}),new Error("Login not success.");this.router.navigate(["/"])},e=>{console.error(e)})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(u.qu),a.Y36(d.e),a.Y36(o.F0),a.Y36(p.ez))},e.\u0275cmp=a.Xpm({type:e,selectors:[["apis-login-page"]],features:[a._Bn([p.ez])],decls:16,vars:2,consts:[[1,"login-body"],[2,"margin","auto","width","350px","margin-top","180px"],[3,"formGroup"],[1,"input-wrapper"],["pInputText","","type","text","id","email","formControlName","username","required","",1,"ui-inputtext","ui-widget",2,"width","100%"],["pInputText","","type","password","autocomplete","off","id","password","formControlName","password","required","",1,"ui-inputtext","ui-widget",2,"width","100%"],["pButton","","type","button",1,"ui-button","ui-widget","ui-state-default","ui-corner-all","ui-button-text-only",3,"disabled","click"]],template:function(e,t){1&e&&(a._UZ(0,"p-toast"),a.TgZ(1,"div",0),a.TgZ(2,"div",1),a.TgZ(3,"p-card"),a.TgZ(4,"form",2),a.TgZ(5,"div",3),a.TgZ(6,"h5"),a._uU(7,"Username"),a.qZA(),a._UZ(8,"input",4),a.qZA(),a.TgZ(9,"div",3),a.TgZ(10,"h5"),a._uU(11,"Password"),a.qZA(),a._UZ(12,"input",5),a.qZA(),a._UZ(13,"br"),a.TgZ(14,"button",6),a.NdJ("click",function(){return t.login()}),a._uU(15," Login "),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(4),a.Q6J("formGroup",t.loginForm),a.xp6(10),a.Q6J("disabled",t.loginForm.invalid))},directives:[g.FN,k,u._Y,u.JL,u.sg,u.Fj,A.o,u.JJ,u.u,u.Q7,J.Hq],styles:[".login-body[_ngcontent-%COMP%]{height:100%;width:100%}.login-panel[_ngcontent-%COMP%]{height:400px;margin:auto}"]}),e})(),canActivate:[c]},{path:"google-success",component:l}];let I=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[o.Bz.forChild(S)],o.Bz]}),e})(),F=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[r.ez,I,u.UX,A.j,J.hJ,_,g.EV]]}),e})()}}]);
"use strict";(self.webpackChunkline_calendar=self.webpackChunkline_calendar||[]).push([[685],{3685:(N,g,a)=>{a.r(g),a.d(g,{LoginModule:()=>k});var l=a(2057),d=a(3713),v=a(8239),e=a(9734),p=a(1558);let T=(()=>{class t{constructor(n){this.loginStore=n}canActivate(n,o){var r=this;return(0,v.Z)(function*(){return r.loginStore.setIsLogin(!1),localStorage.removeItem("_u"),!0})()}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(p.B))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),C=(()=>{class t{constructor(n,o,r){this.activatedRoute=n,this.loginStore=o,this.router=r}ngOnInit(){this.activatedRoute.queryParams.subscribe(n=>{const r=JSON.stringify({_:n.access_token,__:n.refresh_token});localStorage.setItem("_u",r),this.loginStore.setIsLogin(!0),this.router.navigate([""])})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(d.gz),e.Y36(p.B),e.Y36(d.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["apis-login-google-success"]],decls:0,vars:0,template:function(n,o){},styles:[""]}),t})();var s=a(270),u=a(3013),y=a(2429),m=a(7965);function Z(t,i){1&t&&e.GkF(0)}function _(t,i){if(1&t&&(e.TgZ(0,"div",8),e.Hsn(1,1),e.YNc(2,Z,1,0,"ng-container",6),e.qZA()),2&t){const n=e.oxw();e.xp6(2),e.Q6J("ngTemplateOutlet",n.headerTemplate)}}function L(t,i){1&t&&e.GkF(0)}function F(t,i){if(1&t&&(e.TgZ(0,"div",9),e._uU(1),e.YNc(2,L,1,0,"ng-container",6),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij(" ",n.header," "),e.xp6(1),e.Q6J("ngTemplateOutlet",n.titleTemplate)}}function b(t,i){1&t&&e.GkF(0)}function x(t,i){if(1&t&&(e.TgZ(0,"div",10),e._uU(1),e.YNc(2,b,1,0,"ng-container",6),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij(" ",n.subheader," "),e.xp6(1),e.Q6J("ngTemplateOutlet",n.subtitleTemplate)}}function S(t,i){1&t&&e.GkF(0)}function A(t,i){1&t&&e.GkF(0)}function J(t,i){if(1&t&&(e.TgZ(0,"div",11),e.Hsn(1,2),e.YNc(2,A,1,0,"ng-container",6),e.qZA()),2&t){const n=e.oxw();e.xp6(2),e.Q6J("ngTemplateOutlet",n.footerTemplate)}}const G=["*",[["p-header"]],[["p-footer"]]],M=["*","p-header","p-footer"];let Y=(()=>{class t{constructor(n){this.el=n}ngAfterContentInit(){this.templates.forEach(n=>{switch(n.getType()){case"header":this.headerTemplate=n.template;break;case"title":this.titleTemplate=n.template;break;case"subtitle":this.subtitleTemplate=n.template;break;case"content":this.contentTemplate=n.template;break;case"footer":this.footerTemplate=n.template;break;default:this.contentTemplate=n.template}})}getBlockableElement(){return this.el.nativeElement.children[0]}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(e.SBq))},t.\u0275cmp=e.Xpm({type:t,selectors:[["p-card"]],contentQueries:function(n,o,r){if(1&n&&(e.Suo(r,u.h4,5),e.Suo(r,u.$_,5),e.Suo(r,u.jx,4)),2&n){let c;e.iGM(c=e.CRH())&&(o.headerFacet=c.first),e.iGM(c=e.CRH())&&(o.footerFacet=c.first),e.iGM(c=e.CRH())&&(o.templates=c)}},inputs:{header:"header",subheader:"subheader",style:"style",styleClass:"styleClass"},ngContentSelectors:M,decls:9,vars:9,consts:[[3,"ngClass","ngStyle"],["class","p-card-header",4,"ngIf"],[1,"p-card-body"],["class","p-card-title",4,"ngIf"],["class","p-card-subtitle",4,"ngIf"],[1,"p-card-content"],[4,"ngTemplateOutlet"],["class","p-card-footer",4,"ngIf"],[1,"p-card-header"],[1,"p-card-title"],[1,"p-card-subtitle"],[1,"p-card-footer"]],template:function(n,o){1&n&&(e.F$t(G),e.TgZ(0,"div",0),e.YNc(1,_,3,1,"div",1),e.TgZ(2,"div",2),e.YNc(3,F,3,2,"div",3),e.YNc(4,x,3,2,"div",4),e.TgZ(5,"div",5),e.Hsn(6),e.YNc(7,S,1,0,"ng-container",6),e.qZA(),e.YNc(8,J,3,1,"div",7),e.qZA(),e.qZA()),2&n&&(e.Tol(o.styleClass),e.Q6J("ngClass","p-card p-component")("ngStyle",o.style),e.xp6(1),e.Q6J("ngIf",o.headerFacet||o.headerTemplate),e.xp6(2),e.Q6J("ngIf",o.header||o.titleTemplate),e.xp6(1),e.Q6J("ngIf",o.subheader||o.subtitleTemplate),e.xp6(3),e.Q6J("ngTemplateOutlet",o.contentTemplate),e.xp6(1),e.Q6J("ngIf",o.footerFacet||o.footerTemplate))},directives:[l.mk,l.PC,l.O5,l.tP],styles:[".p-card-header img{width:100%}"],encapsulation:2,changeDetection:0}),t})(),w=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[l.ez],u.m8]}),t})();var f=a(3928),h=a(4207);const I=[{path:"",component:(()=>{class t{constructor(n,o,r,c){this.fb=n,this.authService=o,this.router=r,this.messageService=c,this.loginForm=this.fb.group({email:[""],username:["",[s.kI.required]],password:["",[s.kI.required]]})}ngOnInit(){}login(){this.authService.login(this.loginForm.value).subscribe(n=>{if("OK"!==(null==n?void 0:n.success))throw this.messageService.add({severity:"error",summary:"Error",detail:"Login Error"}),new Error("Login not success.");this.router.navigate(["/"])},n=>{console.error(n)})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(s.qu),e.Y36(y.e),e.Y36(d.F0),e.Y36(u.ez))},t.\u0275cmp=e.Xpm({type:t,selectors:[["apis-login-page"]],features:[e._Bn([u.ez])],decls:16,vars:2,consts:[[1,"login-body"],[2,"margin","auto","width","350px","margin-top","180px"],[3,"formGroup"],[1,"input-wrapper"],["pInputText","","type","text","id","email","formControlName","username","required","",1,"ui-inputtext","ui-widget",2,"width","100%"],["pInputText","","type","password","autocomplete","off","id","password","formControlName","password","required","",1,"ui-inputtext","ui-widget",2,"width","100%"],["pButton","","type","button",1,"ui-button","ui-widget","ui-state-default","ui-corner-all","ui-button-text-only",3,"disabled","click"]],template:function(n,o){1&n&&(e._UZ(0,"p-toast"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"p-card"),e.TgZ(4,"form",2),e.TgZ(5,"div",3),e.TgZ(6,"h5"),e._uU(7,"Username"),e.qZA(),e._UZ(8,"input",4),e.qZA(),e.TgZ(9,"div",3),e.TgZ(10,"h5"),e._uU(11,"Password"),e.qZA(),e._UZ(12,"input",5),e.qZA(),e._UZ(13,"br"),e.TgZ(14,"button",6),e.NdJ("click",function(){return o.login()}),e._uU(15," Login "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(4),e.Q6J("formGroup",o.loginForm),e.xp6(10),e.Q6J("disabled",o.loginForm.invalid))},directives:[m.FN,Y,s._Y,s.JL,s.sg,s.Fj,f.o,s.JJ,s.u,s.Q7,h.Hq],styles:[".login-body[_ngcontent-%COMP%]{height:100%;width:100%}.login-panel[_ngcontent-%COMP%]{height:400px;margin:auto}"]}),t})(),canActivate:[T]},{path:"google-success",component:C}];let Q=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[d.Bz.forChild(I)],d.Bz]}),t})(),k=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[l.ez,Q,s.UX,f.j,h.hJ,w,m.EV]]}),t})()}}]);
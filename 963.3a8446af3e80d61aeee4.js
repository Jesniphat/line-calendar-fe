"use strict";(self.webpackChunkline_calendar=self.webpackChunkline_calendar||[]).push([[963],{8963:(J,d,s)=>{s.r(d),s.d(d,{SettingMeetingSummaryModule:()=>Y});var c=s(2057),a=s(270),p=s(3713),T=s(8239),Z=s(5094),M=s(8873),A=s(5576),o=s(5207),t=s(9734),L=s(8497);let U=(()=>{class i{constructor(e){this.http=e,this.url=A.N.api}saveSetting(e){return this.http.post(`${this.url}/calendar/set-scheduled`,{time:e}).pipe((0,o.U)(n=>null==n?void 0:n.data))}updateSchedule(){return this.http.put(`${this.url}/schedules`,{}).pipe((0,o.U)(e=>null==e?void 0:e.data))}getSettingLists(e){return this.http.get(`${this.url}/calendar/schedule-lists?first=${e.first}&rows=${e.rows}`).pipe((0,o.U)(n=>null==n?void 0:n.data))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(L.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var h=s(9922),u=s(7540),C=s(855),l=s(3013),v=s(7965),S=s(4207),y=s(8598),f=s(5897);function E(i,r){1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2,"Time"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Created By"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Created When"),t.qZA(),t.qZA())}function F(i,r){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.qZA()),2&i){const e=r.$implicit;t.xp6(2),t.Oqu(t.xi3(3,3,e.scheduledTime,"HH:mm")),t.xp6(3),t.Oqu((null==e.creater?null:e.creater.firstname)||"-"),t.xp6(2),t.Oqu(e.created)}}const b=[{path:"",component:(()=>{class i{constructor(e,n,m,g){this.fb=e,this.settingMeetingService=n,this.loadingService=m,this.messageService=g,this.setUpTimeForm=this.fb.control(null,[a.kI.required]),this.scheduleLists=[],this.scheduleTotal=0,this.getDataLists=new Z.X({}),this.currentFilter={},this.unsub=[]}ngOnInit(){}ngAfterViewInit(){this.initGetDataLists()}initGetDataLists(){var e=this;return(0,T.Z)(function*(){e.unsub[0]=e.getDataLists.pipe((0,h.b)(n=>{e.currentFilter=n}),(0,u.w)(n=>e.settingMeetingService.getSettingLists(n))).subscribe({next:n=>{e.scheduleLists=n.list,e.scheduleTotal=n.total},error:n=>{e.messageService.add({severity:"error",summary:"error",detail:"Get times error."})}})})()}saveTime(){const e=M(this.setUpTimeForm.value).format("YYYY-MM-DD HH:mm");this.settingMeetingService.saveSetting(e).pipe((0,h.b)(n=>this.loadingService.setLoading(!0)),(0,u.w)(n=>this.settingMeetingService.updateSchedule()),(0,u.w)(n=>this.settingMeetingService.getSettingLists(this.currentFilter))).subscribe({next:n=>{this.loadingService.setLoading(!1),this.scheduleLists=n.list,this.scheduleTotal=n.total,this.messageService.add({severity:"success",summary:"Success",detail:"Add times success."})},error:n=>{this.messageService.add({severity:"error",summary:"error",detail:"Add times error."})}})}ngOnDestroy(){this.unsub.forEach(e=>{e&&e.unsubscribe()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(a.qu),t.Y36(U),t.Y36(C.b),t.Y36(l.ez))},i.\u0275cmp=t.Xpm({type:i,selectors:[["apis-setting-meeting-summary"]],decls:13,vars:8,consts:[["position","top-right"],[1,"p-grid","p-jc-end"],[1,"p-col-3","p-md-2","p-lg-1"],["pButton","","type","button","label","Save",1,"p-button-outlined",3,"disabled","click"],[1,"p-fluid","p-grid","p-formgrid"],[1,"p-field","p-col-12","p-md-6","p-lg-4"],["for","timeonly"],["inputId","timeonly",3,"timeOnly","formControl"],[3,"value","lazy","paginator","rows","totalRecords","onLazyLoad"],["pTemplate","header"],["pTemplate","body"]],template:function(e,n){1&e&&(t._UZ(0,"p-toast",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"button",3),t.NdJ("click",function(){return n.saveTime()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(4,"div",4),t.TgZ(5,"div",5),t.TgZ(6,"label",6),t._uU(7,"\u0e40\u0e27\u0e25\u0e32\u0e2a\u0e23\u0e38\u0e1b\u0e1b\u0e23\u0e30\u0e0a\u0e38\u0e21"),t.qZA(),t._UZ(8,"p-calendar",7),t.qZA(),t.qZA(),t.TgZ(9,"div",4),t.TgZ(10,"p-table",8),t.NdJ("onLazyLoad",function(g){return n.getDataLists.next(g)}),t.YNc(11,E,7,0,"ng-template",9),t.YNc(12,F,8,6,"ng-template",10),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("disabled",n.setUpTimeForm.invalid),t.xp6(5),t.Q6J("timeOnly",!0)("formControl",n.setUpTimeForm),t.xp6(2),t.Q6J("value",n.scheduleLists)("lazy",!0)("paginator",!0)("rows",10)("totalRecords",n.scheduleTotal))},directives:[v.FN,S.Hq,y.f,a.JJ,a.oH,f.iA,l.jx],pipes:[c.uU],styles:[""]}),i})()}];let z=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[p.Bz.forChild(b)],p.Bz]}),i})(),Y=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[l.ez],imports:[[c.ez,a.UX,z,S.hJ,y._8,f.U$,v.EV]]}),i})()}}]);